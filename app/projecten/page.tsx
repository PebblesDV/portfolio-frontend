import { getAllProjects, getFeaturedMediaById } from "@/lib/wordpress";
import { Metadata } from "next";
import Card from "../components/card";
import FallBackImage from "@/public/code.webp";

export const metadata: Metadata = {
  title: "Projecten",
  description: "Generated by create next app",
};

export default async function Projects() {
  const projects = await getAllProjects();

  console.log("project", projects[0].id);
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-7 py-12">
      {projects.length > 0 &&
        projects.map(async (project) => {
          const media =
            typeof project.acf.card_image === "string"
              ? FallBackImage
              : (await getFeaturedMediaById(project.acf.card_image)).source_url;
          return (
            <Card
              imageSrc={media}
              key={project.id}
              title={project.title.rendered}
              href={`/projecten/${project.slug}`}
            />
          );
        })}
    </div>
  );
}
